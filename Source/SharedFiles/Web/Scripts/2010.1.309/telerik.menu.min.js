(function(b){var a=b.telerik;b.extend(a,{menu:function(d,e){this.element=d;this.nextItemZIndex=100;b.extend(this,e);b(".t-item:not(.t-state-disabled)",d).live("mouseenter",a.delegate(this,this.mouseenter),true).live("mouseleave",a.delegate(this,this.mouseleave),true).live("click",a.delegate(this,this.click));b(".t-item:not(.t-state-disabled) > .t-link",d).live("mouseenter",a.hover).live("mouseleave",a.leave);b(document).click(a.delegate(this,this.documentClick));a.bind(this,{select:this.onSelect,open:this.onOpen,close:this.onClose,load:this.onLoad});a.trigger(d,"load")}});var c=function(e){var d=e.parent();return{direction:d.hasClass("t-menu")?d.hasClass("t-menu-vertical")?"right":"bottom":"right"}};a.menu.prototype={toggle:function(d,e){b(d).each(function(){b(this).toggleClass("t-state-default",e).toggleClass("t-state-disabled",!e)})},enable:function(d){this.toggle(d,true)},disable:function(d){this.toggle(d,false)},open:function(d){var e=this;b(d).each(b.proxy(function(h,g){var f=b(g);clearTimeout(f.data("timer"));f.data("timer",setTimeout(b.proxy(function(){var i=f.find(".t-group:first");if(i.length==0){return}f.css("z-index",e.nextItemZIndex++);a.fx.play(this.effects,i,c(f))},this)))},this))},close:function(d){var e=this;b(d).each(b.proxy(function(h,g){var f=b(g);clearTimeout(f.data("timer"));f.data("timer",setTimeout(b.proxy(function(){var i=f.find(".t-group:first");if(i.length==0){return}a.fx.rewind(this.effects,i,c(f),function(){f.css("zIndex","");if(b(e.element).find(".t-group:visible").length==0){e.nextItemZIndex=100}});i.find(".t-group").stop(false,true)},this)))},this))},mouseenter:function(f,d){if(!this.openOnClick||this.clicked){this.triggerEvent("open",b(d));this.open(b(d));b(d.parentNode).trigger(f)}if(this.openOnClick&&this.clicked){this.triggerEvent("close",b(d));b(d).siblings().each(b.proxy(function(e,g){this.close(b(g))},this))}},mouseleave:function(f,d){if(!this.openOnClick){this.triggerEvent("close",b(d));this.close(b(d));b(d.parentNode).trigger(f)}},click:function(g,f){var d=b(f);a.trigger(this.element,"select",{item:d[0]});if(!d.parent().hasClass("t-menu")||!this.openOnClick){return}g.preventDefault();this.clicked=true;this.triggerEvent("open",d);this.open(d)},documentClick:function(f,d){if(b.contains(this.element,f.target)){return}if(this.clicked){this.clicked=false;b(this.element).children(".t-item").each(b.proxy(function(e,g){this.close(b(g))},this))}},hasChildren:function(d){return d.find(".t-group:first").length},triggerEvent:function(e,d){if(this.hasChildren(d)){a.trigger(this.element,e,{item:d[0]})}}};b.fn.tMenu=function(d){d=b.extend({},b.fn.tMenu.defaults,d);return this.each(function(){d=b.meta?b.extend({},d,b(this).data()):d;if(!b(this).data("tMenu")){b(this).data("tMenu",new a.menu(this,d))}})};b.fn.tMenu.defaults={orientation:"horizontal",effects:a.fx.slide.defaults(),openOnClick:false}})(jQuery);