(function(c){var b=c.telerik;var d={"190":".","110":".","188":","};var a=[8,9,37,38,39,40,46,35,36,44];b.textbox=function(g,e){this.element=g;c.extend(this,e);var l=new b.stringBuilder();l.cat("[ |").cat(this.groupSeparator).catIf("|"+this.symbol,this.symbol).cat("]");this.replaceRegExp=new RegExp(l.string(),"g");var f=c.browser.msie?"paste":"input";var h=c(".t-input",g).hide();var i=h.attr("value");c("<input>",{id:h.attr("id")+"-text",name:h.attr("name")+"-text","class":h.attr("class"),value:(i||this.text)}).bind({blur:b.delegate(this,this.blur),focus:b.delegate(this,this.focus),keydown:b.delegate(this,this.keydown),keypress:b.delegate(this,this.keypress),change:function(m){m.stopPropagation();return false}}).bind(f,b.delegate(this,this[f])).insertAfter(h);var k=c(".t-arrow-up, .t-arrow-down",g).bind({mouseup:b.delegate(this,this.clearTimer),mouseout:b.delegate(this,this.clearTimer),click:b.preventDefault,dragstart:b.preventDefault,dblclick:b.delegate(this,this.clearTimer)});c(k[0]).mousedown(c.proxy(function(m){this.isChange();this.stepper(m,1)},this));c(k[1]).mousedown(c.proxy(function(m){this.isChange();this.stepper(m,-1)},this));var j=this.separator;this.step=this.parse(this.step,j);this.val=this.parse(this.val,j);this.minValue=this.parse(this.minValue,j);this.maxValue=this.parse(this.maxValue,j);if(i!=""){this.value(i)}b.bind(this,{change:this.onChange,load:this.onLoad});b.trigger(g,"load")};b.textbox.prototype={isChange:function(){var e=c("> .t-input:last",this.element).val();if(this.val!=e.replace(this.replaceRegExp,"")){this.value(e)}},input:function(h,g){var i=c(g).val();if(i=="-"){return true}var f=this.parse(i,this.separator);if(f||f==0){this.trigger(this.round(f,this.digits))}},paste:function(j,i){var h=c(i);var k=h.val();var g=i.document.selection.createRange().text;var l=window.clipboardData.getData("Text");if(g>0){k=k.replace(g,l)}else{k+=l}var f=this.parse(k,this.separator);if(f||f==0){this.trigger(this.round(f,this.digits))}},focus:function(h,g){this.focused=true;this.isChange();var f=this.formatEdit(this.val);c(g).val(f||(f==0?0:""))},blur:function(h){var f=c(h.target);this.focused=false;var g=f.val();if(!g&&g!="0"||!this.val&&this.val!=0){this.value(null);f.removeClass("t-state-error").val(this.text||"");return true}else{if(this.range(this.val,this.minValue,this.maxValue)){f.removeClass("t-state-error").val(this.format(this.round(this.val,this.digits)))}else{f.addClass("t-state-error")}}},keydown:function(j,i){var g=j.keyCode;var h=c(i);var k=this.separator;var f=d[g];if(f){if(f==k&&this.digits>0&&this.caretPos(h[0])!=0&&h.val().indexOf(k)==-1){return true}else{j.preventDefault()}}if(g==8||g==46){setTimeout(b.delegate(this,function(){this.parseTrigger(h.val())}));return true}if(g==38||g==40){this.modifyInput(h,this.step*(g==38?1:-1));return true}if(g==222){j.preventDefault()}},keypress:function(h){var g=c(h.target);var f=h.keyCode||h.which;if(f==0||c.inArray(f,a)!=-1||h.ctrlKey||(h.shiftKey&&f==45)){return true}if((this.minValue<0&&String.fromCharCode(f)=="-"&&this.caretPos(g[0])==0&&g.val().indexOf("-")==-1)||this.range(f,48,57)){setTimeout(b.delegate(this,function(){this.parseTrigger(g.val())}));return true}h.preventDefault()},clearTimer:function(f){clearTimeout(this.timeout);clearInterval(this.timer);clearInterval(this.acceleration)},stepper:function(i,f){if(i.which==1){var h=c(".t-input:last",this.element);var g=this.step;this.modifyInput(h,f*g);this.timeout=setTimeout(b.delegate(this,function(){this.timer=setInterval(b.delegate(this,function(){this.modifyInput(h,f*g)}),80);this.acceleration=setInterval(function(){g+=1},1000)}),200)}},value:function(e){if(arguments.length==0){return this.val}var g=(typeof e===typeof 1)?e:this.parse(e,this.separator);var f=g===null;this.val=g;c(".t-input:first",this.element).val(f?"":this.formatEdit(g));c(".t-input:last",this.element).toggleClass("t-state-error",!this.range(this.val,this.minValue,this.maxValue)).val(f?this.text:this.format(g));return this},modifyInput:function(g,f){var e=this.val;var h=this.minValue;var j=this.maxValue;e=e?e+f:f;e=e<h?h:e>j?j:e;var k=this.round(e,this.digits);this.trigger(k);var i=this.focused?this.formatEdit(k):this.format(k);g.removeClass("t-state-error").val(i)},formatEdit:function(e){var f=this.separator;if(e&&f!="."){e=e.toString().replace(".",f)}return e},format:function(e){var g=e.toString().split(".");var h=g[0].replace("-","");var m=new b.stringBuilder();if(this.groupSeparator!=""){for(var f=0,k=h.length;f<k;f++){m.catIf(this.groupSeparator,f!=0&&(k-f)%this.groupSize==0).cat(h.charAt(f))}}else{m.cat(h)}if(g.length>1){m.cat(this.separator).cat(g[1])}var l=this.val<0?this.patterns.negative[this.negative]:this.symbol?this.patterns.positive[this.positive]:null;return l?l.replace("n",m.string()).replace("*",this.symbol):m.string()},trigger:function(e){if(this.val!=e){b.trigger(this.element,"change",{oldValue:this.val,newValue:e});c(".t-input:first",this.element).val(this.formatEdit(e));this.val=e}},parseTrigger:function(e){var f=this.parse(e,this.separator);if(f||f==0){this.trigger(this.round(f,this.digits))}},caretPos:function(g){var f=-1;if(document.selection){var e=g.document.selection.createRange();e.moveStart("character",-g.value.length);f=e.text.length}else{if(g.selectionStart||g.selectionStart=="0"){f=g.selectionStart}}return f},range:function(e,f,g){return e>=f&&e<=g},parse:function(e,f){var g=null;if(e||e=="0"){if(typeof e==typeof 1){return e}e=e.replace(this.replaceRegExp,"");if(f&&f!="."){e=e.replace(f,".")}g=parseFloat(e)}return isNaN(g)?null:g},round:function(e,f){if(e||e==0){return parseFloat(e.toFixed(f||2))}return null}};c.fn.tTextBox=function(g){var f=g.type;var e=c.fn.tTextBox.defaults[f];if(b.cultureInfo[f+"decimaldigits"]){e.digits=b.cultureInfo[f+"decimaldigits"];e.separator=b.cultureInfo[f+"decimalseparator"];e.groupSeparator=b.cultureInfo[f+"groupseparator"];e.groupSize=b.cultureInfo[f+"groupsize"];e.positive=b.cultureInfo[f+"positive"];e.negative=b.cultureInfo[f+"negative"];e.symbol=b.cultureInfo[f+"symbol"]}g=c.extend({},e,{patterns:c.fn.tTextBox.patterns[f]},g);return this.each(function(){g=c.meta?c.extend({},g,c(this).data()):g;if(!c(this).data("tTextBox")){c(this).data("tTextBox",new b.textbox(this,g))}})};c.fn.tTextBox.defaults={numeric:{val:null,minValue:-100,maxValue:100,step:1,digits:2,separator:".",groupSeparator:",",groupSize:3,negative:1},currency:{val:null,minValue:0,maxValue:1000,step:1,symbol:"$",digits:2,separator:".",groupSeparator:",",groupSize:3,positive:0,negative:0},percent:{val:null,minValue:0,maxValue:100,step:1,symbol:"%",digits:2,separator:".",groupSeparator:",",groupSize:3,positive:0,negative:0}};c.fn.tTextBox.patterns={numeric:{negative:["(n)","-n","- n","n-","n -"]},currency:{positive:["*n","n*","* n","n *"],negative:["(*n)","-*n","*-n","*n-","(n*)","-n*","n-*","n*-","-n *","-* n","n *-","* n-","* -n","n- *","(* n)","(n *)"]},percent:{positive:["n *","n*","*n"],negative:["-n *","-n*","-*n"]}}})(jQuery);