(function(c){var a=c.telerik;var b=5;var d=10;a.draganddrop=function(e,f){if(!(this instanceof arguments.callee)){return new arguments.callee(e,f)}c.extend(this,f);e="."+(e||"draganddrop");c(f.draggables).live("mousedown",c.proxy(this.waitForDrag,this)).live("dragstart",a.preventDefault).live("selectstart",function(){return false});this.evt={mm:"mousemove"+e,ku:"keyup"+e,mu:"mouseup"+e}};a.draganddrop.applyContext=function(g,f){var e={};c.each(g,function(h){e[h]=c.isFunction(this)?c.proxy(this,f):this});return e};a.draganddrop.prototype={moveClue:function(g){this.$dragClue.css({left:g.pageX+d,top:g.pageY+d});var f=this.onDragMove(g,this.$draggedElement,this.$dragClue)||"t-denied";this.$dragClueStatus.className="t-icon t-drag-status "+f},startDrag:function(i){var g=this.hittestCoordinates.left-i.pageX;var f=this.hittestCoordinates.top-i.pageY;var h=Math.sqrt((f*f)+(g*g));if(h>b){c(document).unbind(this.evt.mm);if(this.onDragStart(this.$draggedElement)){}this.$dragClueStatus=c('<span class="t-icon t-drag-status t-denied" />')[0];this.$dragClue=c('<div class="t-header t-drag-clue" />').html(this.createDragClue(this.$draggedElement)).prepend(this.$dragClueStatus).css({left:i.pageX+d,top:i.pageY+d}).appendTo(document.body);c(document).bind(this.evt.mm,c.proxy(this.moveClue,this)).bind(this.evt.ku,c.proxy(this.keyboardListener,this))}},removeDragClue:function(){if(this.$dragClue){this.$dragClue.remove();this.$dragClue=null;this.$dragClueStatus=null}},stopDrag:function(f){if(this.$dragClue){var g=this.onDrop(f,this.$draggedElement,this.$dragClue);if(!g){this.$dragClue.animate(this.$draggedElement.offset(),"fast",c.proxy(this.removeDragClue,this))}else{if(typeof g=="function"){g(c.proxy(this.removeDragClue,this))}else{this.removeDragClue()}}}c(document).unbind([this.evt.mm,this.evt.mu,this.evt.ku].join(" "))},waitForDrag:function(g){var f=c(g.target);if(g.which!==1||!this.shouldDrag(f)){return}g.preventDefault();this.$draggedElement=f;this.hittestCoordinates={left:g.pageX,top:g.pageY};c(document).bind(this.evt.mm,c.proxy(this.startDrag,this)).bind(this.evt.mu,c.proxy(this.stopDrag,this))},keyboardListener:function(f){if(f.keyCode==27&&this.$dragClue){c(document).unbind([this.evt.mm,this.evt.mu,this.evt.ku].join(" "));this.onDragCancelled(this.$draggedElement);this.$dragClue.animate(this.$draggedElement.offset(),"fast",c.proxy(this.removeDragClue,this))}}}})(jQuery);